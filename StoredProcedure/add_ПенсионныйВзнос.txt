CREATE PROCEDURE add_ПенсионныйВзнос
@работникID INT,
@Дата DATETIME,
@ИныеПлатежи MONEY,
@ЗадолжЗаПредПериод MONEY,
@Номер_ПлатежныйДок VARCHAR(20),
@Дата_ПлатежныйДок DATETIME,
@Сумма_ПлатежныйДок MONEY
AS

DECLARE @IDdoc INT
IF (@Номер_ПлатежныйДок IS NOT NULL)
	BEGIN
		EXEC add_ПлатежныйДокумент @Номер_ПлатежныйДок, @Дата_ПлатежныйДок, @Сумма_ПлатежныйДок, @IDdoc output;
	END
	
INSERT INTO Пенсионный_взнос (работникID, Дата, Иные_платежи, Задолж_за_пред_период, ID_платежный_док, DEL)
VALUES (@работникID, @Дата, @ИныеПлатежи, @ЗадолжЗаПредПериод, @IDdoc, 0)